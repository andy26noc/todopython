# Funcion para conectarse al cmts(cisco) y realizar una accion, en este caso show cable modem
import telnetlib
import time
import sys

equipos = '127.0.0.1'  # sys.argv[1]

def conexion_telnet(ip):
    user = 'usuario'
    password = 'password'
    pass1 = 'enable_pass'
    comando = 'show cable modem'
    ip1 = ip.split()
    for cmts in ip1:
        cmts1 = cmts.strip()
        tn = telnetlib.Telnet(cmts1)
        time.sleep(1)
        tn.read_until("Username: ")
        tn.write(user + "\n")
        tn.read_until("Password: ")
        tn.write(password + "\n")
        time.sleep(1)
        tn.write('enable' + "\n")
        tn.write(pass1 + "\n")
        tn.write("terminal length 0\n")
        tn.write(comando + "\n")
        time.sleep(2)
        tn.write("exit" + "\n")
        todo = tn.read_all()
        tn.close()
        return todo

resultado = conexion_telnet(equipos)
cambio1 = resultado.splitlines()

for i in cambio1:
    print i

